# 设置缓存过期时间 {#task_187634 .task}

本文为您介绍了缓存过期时间的功能信息及如何设置缓存过期时间。

缓存过期时间可以针对拥有不同目录路径和文件名后缀的资源，进行缓存服务器行为的设置。您可以自主指定资源内容的缓存过期时间规则。

-   支持用户自定义缓存策略优先级。
-   Cache的默认缓存策略：
    -   如果源站已经有Cache配置，则缓存过期时间的配置，其优先级高于源站的配置。
    -   如果源站没有Cache配置，则支持按目录、文件后缀名两种方式设置缓存过期时间\(支持设置完整路径缓存策略\)。

具体缓存策略，如下图所示，详情请参见[CDN节点默认缓存策略](../../../../intl.zh-CN/.md#)。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13465/15591100204459_zh-CN.png)

**说明：** CDN的缓存可能由于热度较低被提前剔除出CDN节点。

缓存过期时间推荐配置如下表所示。

|文件类型|缓存时间设置|举例|
|:---|:-----|:-|
|更新不频繁的静态文件|1个月以上|图片类型、应用下载类型|
|需要更新并且更新频繁的静态文件|稍短于1个月|js、css|
|动态文件|较短缓存时间|php文件内容更新|
|更新频繁的动态文件|0s（不缓存）|php、jsp、asp|

**说明：** 建议源站的内容不要使用同名更新，请您以版本号的方式，即采用`img-v1.0.jpg`、`img-v2.1.jpg`的命名方式。

1.  登录[全站加速控制台](https://dcdn.console.aliyun.com/overview)。
2.  在 域名管理页面，选择您需要设置的域名，单击 **配置**。
3.  选择**缓存配置** \> **缓存过期时间** ，您可以对缓存规则进行添加、修改、删除等操作和管理。 

    ![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/13465/15591100204460_zh-CN.png)

4.  单击**添加**，您可以选择按 **目录** 或 **文件后缀名**两种方式，然后填写**内容**、**过期时间**、**权重**，单击**确认**。 例如：为加速域名`example.aliyun.com`设置三个缓存过期时间规则。

    -   缓存策略1：文件后缀名为jpg、png的所有资源，过期时间为1月，权重设置为90。
    -   缓存策略2：目录为/www/dir/aaa过期时间为1小时，权重设置为70。
    -   缓存策略3：完整路径为/www/dir/aaa/example.php过期时间为0s，权重设置为80。
    存策略的生效顺序是：策略1\>策略3\>策略2。

    **说明：** 

    -   权重可设置1-99，数字越大的，会优先生效。
    -   不推荐设置相同的权重，权重相同的两条缓存策略优先级随机。

